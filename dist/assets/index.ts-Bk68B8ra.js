(function(){function a(e){const r=e.querySelector("textarea:not([readonly])");if(r)return r;const n=e.querySelector('[contenteditable="true"]');if(n)return n;const t=e.querySelector("rich-textarea textarea");if(t)return t;const u=e.querySelectorAll("*");for(const o of u)if(o.shadowRoot){const c=a(o.shadowRoot);if(c)return c}return null}function s(e,r){e instanceof HTMLTextAreaElement?(e.focus(),e.value=r,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))):(e.focus(),e.textContent=r,e.dispatchEvent(new InputEvent("input",{bubbles:!0,inputType:"insertText",data:r})))}chrome.runtime.onMessage.addListener((e,r,n)=>{if(e.action==="insertPrompt"){try{const t=a(document);t?(s(t,e.text),n({success:!0})):n({success:!1,error:"ไม่พบช่องพิมพ์ข้อความ กรุณาลองคลิกที่ช่องพิมพ์ก่อน"})}catch(t){n({success:!1,error:`เกิดข้อผิดพลาด: ${t instanceof Error?t.message:"Unknown error"}`})}return!0}});console.log("FlowMate content script loaded");
})()